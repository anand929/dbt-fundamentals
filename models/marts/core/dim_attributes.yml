version: 2

models:
  - name: dim_customers
    description: dimension table for customer table
    
    columns:
      - name: customer_id
        description: customer id column
        tests:
          - not_null
          - relationships:
              to: ref('stg_customer')
              field: customer_id

      - name: first_name
        description: first name
      - name: first_order_date
        description: first order date
      - name: last_name
        description: last name
      - name: lifetime_value
        description: life time value
      - name: most_recent_order_date
        description: most recent order date
      - name: number_of_orders
        description: number of orders

  - name: fct_orders
    description: fact table for orders
    columns:
      - name: order_id
        description: order id
        tests:
          - not_null
          - relationships:
              to: ref('stg_orders')
              field: order_id  
      - name: customer_id
        description: customer id
      - name: order_date
        description: order date
      - name: amount
        description: order amount

  - name: int_orders__pivoted
    description: order pivoted table
    columns:
      - name: order_id
        description: order id
        tests:
          - not_null
          - relationships:
              to: ref('stg_orders')
              field: order_id
      - name: coupon_amount
        description: coupon_amount
      - name: credit_card_amount
        description: credit card amount
      - name: bank_transfer_amount
        description: bank transfer amount
      - name: gift_card_amount
        description: gift card amount